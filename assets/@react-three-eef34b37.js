import{_ as ne}from"./@babel-98964cd2.js";import{r as y}from"./react-1d8b2501.js";import{L as se,T as at,R as st,U as lt,a as Fe,O as ct,P as ut,S as _e,b as le,N as ft,A as dt,V as Be,c as Y,B as pt,M as vt,C as He,W as mt,d as ht,e as gt,f as _t,g as yt,h as bt,i as wt,j as Et,E as Ct,k as Pt,l as St,H as Mt,D as kt}from"./three-8b24794f.js";import{u as Rt}from"./react-use-measure-d29e657e.js";import{F as Ot,u as xt}from"./its-fine-1bc6d9bc.js";import{R as Tt,c as K}from"./react-reconciler-9b028127.js";import"./react-dom-8f395115.js";import{O as jt,E as Re,R as Lt,G as At}from"./three-stdlib-d90b4a76.js";import{s as Ge,p as Dt,c as It}from"./suspend-react-00b64780.js";import{c as Ne}from"./zustand-b2af9d58.js";var qe={exports:{}},Ue={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(b,k){var S=b.length;b.push(k);e:for(;0<S;){var R=S-1>>>1,O=b[R];if(0<s(O,k))b[R]=k,b[S]=O,S=R;else break e}}function o(b){return b.length===0?null:b[0]}function i(b){if(b.length===0)return null;var k=b[0],S=b.pop();if(S!==k){b[0]=S;e:for(var R=0,O=b.length,H=O>>>1;R<H;){var I=2*(R+1)-1,Q=b[I],G=I+1,oe=b[G];if(0>s(Q,S))G<O&&0>s(oe,Q)?(b[R]=oe,b[G]=S,R=G):(b[R]=Q,b[I]=S,R=I);else if(G<O&&0>s(oe,S))b[R]=oe,b[G]=S,R=G;else break e}}return k}function s(b,k){var S=b.sortIndex-k.sortIndex;return S!==0?S:b.id-k.id}if(typeof performance=="object"&&typeof performance.now=="function"){var f=performance;e.unstable_now=function(){return f.now()}}else{var g=Date,m=g.now();e.unstable_now=function(){return g.now()-m}}var a=[],v=[],n=1,r=null,l=3,u=!1,d=!1,w=!1,_=typeof setTimeout=="function"?setTimeout:null,c=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function h(b){for(var k=o(v);k!==null;){if(k.callback===null)i(v);else if(k.startTime<=b)i(v),k.sortIndex=k.expirationTime,t(a,k);else break;k=o(v)}}function M(b){if(w=!1,h(b),!d)if(o(a)!==null)d=!0,N(P);else{var k=o(v);k!==null&&F(M,k.startTime-b)}}function P(b,k){d=!1,w&&(w=!1,c(L),L=-1),u=!0;var S=l;try{for(h(k),r=o(a);r!==null&&(!(r.expirationTime>k)||b&&!C());){var R=r.callback;if(typeof R=="function"){r.callback=null,l=r.priorityLevel;var O=R(r.expirationTime<=k);k=e.unstable_now(),typeof O=="function"?r.callback=O:r===o(a)&&i(a),h(k)}else i(a);r=o(a)}if(r!==null)var H=!0;else{var I=o(v);I!==null&&F(M,I.startTime-k),H=!1}return H}finally{r=null,l=S,u=!1}}var E=!1,x=null,L=-1,T=5,A=-1;function C(){return!(e.unstable_now()-A<T)}function j(){if(x!==null){var b=e.unstable_now();A=b;var k=!0;try{k=x(!0,b)}finally{k?z():(E=!1,x=null)}}else E=!1}var z;if(typeof p=="function")z=function(){p(j)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,U=q.port2;q.port1.onmessage=j,z=function(){U.postMessage(null)}}else z=function(){_(j,0)};function N(b){x=b,E||(E=!0,z())}function F(b,k){L=_(function(){b(e.unstable_now())},k)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(b){b.callback=null},e.unstable_continueExecution=function(){d||u||(d=!0,N(P))},e.unstable_forceFrameRate=function(b){0>b||125<b?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<b?Math.floor(1e3/b):5},e.unstable_getCurrentPriorityLevel=function(){return l},e.unstable_getFirstCallbackNode=function(){return o(a)},e.unstable_next=function(b){switch(l){case 1:case 2:case 3:var k=3;break;default:k=l}var S=l;l=k;try{return b()}finally{l=S}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(b,k){switch(b){case 1:case 2:case 3:case 4:case 5:break;default:b=3}var S=l;l=b;try{return k()}finally{l=S}},e.unstable_scheduleCallback=function(b,k,S){var R=e.unstable_now();switch(typeof S=="object"&&S!==null?(S=S.delay,S=typeof S=="number"&&0<S?R+S:R):S=R,b){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=S+O,b={id:n++,callback:k,priorityLevel:b,startTime:S,expirationTime:O,sortIndex:-1},S>R?(b.sortIndex=S,t(v,b),o(a)===null&&b===o(v)&&(w?(c(L),L=-1):w=!0,F(M,S-R))):(b.sortIndex=O,t(a,b),d||u||(d=!0,N(P))),b},e.unstable_shouldYield=C,e.unstable_wrapCallback=function(b){var k=l;return function(){var S=l;l=k;try{return b.apply(this,arguments)}finally{l=S}}}})(Ue);qe.exports=Ue;var Oe=qe.exports;const we={},$e=e=>void Object.assign(we,e);function zt(e,t){function o(n,{args:r=[],attach:l,...u},d){let w=`${n[0].toUpperCase()}${n.slice(1)}`,_;if(n==="primitive"){if(u.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const c=u.object;_=V(c,{type:n,root:d,attach:l,primitive:!0})}else{const c=we[w];if(!c)throw new Error(`R3F: ${w} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(r))throw new Error("R3F: The args prop must be an array!");_=V(new c(...r),{type:n,root:d,attach:l,memoizedProps:{args:r}})}return _.__r3f.attach===void 0&&(_ instanceof pt?_.__r3f.attach="geometry":_ instanceof vt&&(_.__r3f.attach="material")),w!=="inject"&&fe(_,u),_}function i(n,r){let l=!1;if(r){var u,d;(u=r.__r3f)!=null&&u.attach?ue(n,r,r.__r3f.attach):r.isObject3D&&n.isObject3D&&(n.add(r),l=!0),l||(d=n.__r3f)==null||d.objects.push(r),r.__r3f||V(r,{}),r.__r3f.parent=n,be(r),X(r)}}function s(n,r,l){let u=!1;if(r){var d,w;if((d=r.__r3f)!=null&&d.attach)ue(n,r,r.__r3f.attach);else if(r.isObject3D&&n.isObject3D){r.parent=n,r.dispatchEvent({type:"added"});const _=n.children.filter(p=>p!==r),c=_.indexOf(l);n.children=[..._.slice(0,c),r,..._.slice(c)],u=!0}u||(w=n.__r3f)==null||w.objects.push(r),r.__r3f||V(r,{}),r.__r3f.parent=n,be(r),X(r)}}function f(n,r,l=!1){n&&[...n].forEach(u=>g(r,u,l))}function g(n,r,l){if(r){var u,d,w;if(r.__r3f&&(r.__r3f.parent=null),(u=n.__r3f)!=null&&u.objects&&(n.__r3f.objects=n.__r3f.objects.filter(M=>M!==r)),(d=r.__r3f)!=null&&d.attach)Ae(n,r,r.__r3f.attach);else if(r.isObject3D&&n.isObject3D){var _;n.remove(r),(_=r.__r3f)!=null&&_.root&&Ut(r.__r3f.root,r)}const p=(w=r.__r3f)==null?void 0:w.primitive,h=l===void 0?r.dispose!==null&&!p:l;if(!p){var c;f((c=r.__r3f)==null?void 0:c.objects,r,h),f(r.children,r,h)}delete r.__r3f,h&&r.dispose&&r.type!=="Scene"&&Oe.unstable_scheduleCallback(Oe.unstable_IdlePriority,()=>{try{r.dispose()}catch{}}),X(n)}}function m(n,r,l,u){var d;const w=(d=n.__r3f)==null?void 0:d.parent;if(!w)return;const _=o(r,l,n.__r3f.root);if(n.children){for(const c of n.children)c.__r3f&&i(_,c);n.children=n.children.filter(c=>!c.__r3f)}n.__r3f.objects.forEach(c=>i(_,c)),n.__r3f.objects=[],n.__r3f.autoRemovedBeforeAppend||g(w,n),_.parent&&(_.__r3f.autoRemovedBeforeAppend=!0),i(w,_),_.raycast&&_.__r3f.eventCount&&_.__r3f.root.getState().internal.interaction.push(_),[u,u.alternate].forEach(c=>{c!==null&&(c.stateNode=_,c.ref&&(typeof c.ref=="function"?c.ref(_):c.ref.current=_))})}const a=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:Tt({createInstance:o,removeChild:g,appendChild:i,appendInitialChild:i,insertBefore:s,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(n,r)=>{if(!r)return;const l=n.getState().scene;l.__r3f&&(l.__r3f.root=n,i(l,r))},removeChildFromContainer:(n,r)=>{r&&g(n.getState().scene,r)},insertInContainerBefore:(n,r,l)=>{if(!r||!l)return;const u=n.getState().scene;u.__r3f&&s(u,r,l)},getRootHostContext:()=>null,getChildHostContext:n=>n,finalizeInitialChildren(n){var r;return!!((r=n==null?void 0:n.__r3f)!=null?r:{}).handlers},prepareUpdate(n,r,l,u){if(n.__r3f.primitive&&u.object&&u.object!==n)return[!0];{const{args:d=[],children:w,..._}=u,{args:c=[],children:p,...h}=l;if(!Array.isArray(d))throw new Error("R3F: the args prop must be an array!");if(d.some((P,E)=>P!==c[E]))return[!0];const M=Je(n,_,h,!0);return M.changes.length?[!1,M]:null}},commitUpdate(n,[r,l],u,d,w,_){r?m(n,u,w,_):fe(n,l)},commitMount(n,r,l,u){var d;const w=(d=n.__r3f)!=null?d:{};n.raycast&&w.handlers&&w.eventCount&&n.__r3f.root.getState().internal.interaction.push(n)},getPublicInstance:n=>n,prepareForCommit:()=>null,preparePortalMount:n=>V(n.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(n){var r;const{attach:l,parent:u}=(r=n.__r3f)!=null?r:{};l&&u&&Ae(u,n,l),n.isObject3D&&(n.visible=!1),X(n)},unhideInstance(n,r){var l;const{attach:u,parent:d}=(l=n.__r3f)!=null?l:{};u&&d&&ue(d,n,u),(n.isObject3D&&r.visible==null||r.visible)&&(n.visible=!0),X(n)},createTextInstance:a,hideTextInstance:a,unhideTextInstance:a,getCurrentEventPriority:()=>t?t():K.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&D.fun(performance.now)?performance.now:D.fun(Date.now)?Date.now:()=>0,scheduleTimeout:D.fun(setTimeout)?setTimeout:void 0,cancelTimeout:D.fun(clearTimeout)?clearTimeout:void 0}),applyProps:fe}}var xe,Te;const ce=e=>"colorSpace"in e||"outputColorSpace"in e,We=()=>{var e;return(e=we.ColorManagement)!=null?e:null},Ve=e=>e&&e.isOrthographicCamera,Ft=e=>e&&e.hasOwnProperty("current"),re=typeof window<"u"&&((xe=window.document)!=null&&xe.createElement||((Te=window.navigator)==null?void 0:Te.product)==="ReactNative")?y.useLayoutEffect:y.useEffect;function Ee(e){const t=y.useRef(e);return re(()=>void(t.current=e),[e]),t}function Bt({set:e}){return re(()=>(e(new Promise(()=>null)),()=>e(!1)),[e]),null}class Xe extends y.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}}Xe.getDerivedStateFromError=()=>({error:!0});const Ye="__default",je=new Map,Ht=e=>e&&!!e.memoized&&!!e.changes;function Ke(e){var t;const o=typeof window<"u"?(t=window.devicePixelRatio)!=null?t:2:1;return Array.isArray(e)?Math.min(Math.max(e[0],o),e[1]):e}const Z=e=>{var t;return(t=e.__r3f)==null?void 0:t.root.getState()},D={obj:e=>e===Object(e)&&!D.arr(e)&&typeof e!="function",fun:e=>typeof e=="function",str:e=>typeof e=="string",num:e=>typeof e=="number",boo:e=>typeof e=="boolean",und:e=>e===void 0,arr:e=>Array.isArray(e),equ(e,t,{arrays:o="shallow",objects:i="reference",strict:s=!0}={}){if(typeof e!=typeof t||!!e!=!!t)return!1;if(D.str(e)||D.num(e))return e===t;const f=D.obj(e);if(f&&i==="reference")return e===t;const g=D.arr(e);if(g&&o==="reference")return e===t;if((g||f)&&e===t)return!0;let m;for(m in e)if(!(m in t))return!1;if(f&&o==="shallow"&&i==="shallow"){for(m in s?t:e)if(!D.equ(e[m],t[m],{strict:s,objects:"reference"}))return!1}else for(m in s?t:e)if(e[m]!==t[m])return!1;if(D.und(m)){if(g&&e.length===0&&t.length===0||f&&Object.keys(e).length===0&&Object.keys(t).length===0)return!0;if(e!==t)return!1}return!0}};function Gt(e){const t={nodes:{},materials:{}};return e&&e.traverse(o=>{o.name&&(t.nodes[o.name]=o),o.material&&!t.materials[o.material.name]&&(t.materials[o.material.name]=o.material)}),t}function Nt(e){e.dispose&&e.type!=="Scene"&&e.dispose();for(const t in e)t.dispose==null||t.dispose(),delete e[t]}function V(e,t){const o=e;return(t!=null&&t.primitive||!o.__r3f)&&(o.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...t}),e}function ye(e,t){let o=e;if(t.includes("-")){const i=t.split("-"),s=i.pop();return o=i.reduce((f,g)=>f[g],e),{target:o,key:s}}else return{target:o,key:t}}const Le=/-\d+$/;function ue(e,t,o){if(D.str(o)){if(Le.test(o)){const f=o.replace(Le,""),{target:g,key:m}=ye(e,f);Array.isArray(g[m])||(g[m]=[])}const{target:i,key:s}=ye(e,o);t.__r3f.previousAttach=i[s],i[s]=t}else t.__r3f.previousAttach=o(e,t)}function Ae(e,t,o){var i,s;if(D.str(o)){const{target:f,key:g}=ye(e,o),m=t.__r3f.previousAttach;m===void 0?delete f[g]:f[g]=m}else(i=t.__r3f)==null||i.previousAttach==null||i.previousAttach(e,t);(s=t.__r3f)==null||delete s.previousAttach}function Je(e,{children:t,key:o,ref:i,...s},{children:f,key:g,ref:m,...a}={},v=!1){var n;const r=(n=e==null?void 0:e.__r3f)!=null?n:{},l=Object.entries(s),u=[];if(v){const w=Object.keys(a);for(let _=0;_<w.length;_++)s.hasOwnProperty(w[_])||l.unshift([w[_],Ye+"remove"])}l.forEach(([w,_])=>{var c;if((c=e.__r3f)!=null&&c.primitive&&w==="object"||D.equ(_,a[w]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(w))return u.push([w,_,!0,[]]);let p=[];w.includes("-")&&(p=w.split("-")),u.push([w,_,!1,p]);for(const h in s){const M=s[h];h.startsWith(`${w}-`)&&u.push([h,M,!1,h.split("-")])}});const d={...s};return r.memoizedProps&&r.memoizedProps.args&&(d.args=r.memoizedProps.args),r.memoizedProps&&r.memoizedProps.attach&&(d.attach=r.memoizedProps.attach),{memoized:d,changes:u}}function fe(e,t){var o,i,s;const f=(o=e.__r3f)!=null?o:{},g=f.root,m=(i=g==null||g.getState==null?void 0:g.getState())!=null?i:{},{memoized:a,changes:v}=Ht(t)?t:Je(e,t),n=f.eventCount;e.__r3f&&(e.__r3f.memoizedProps=a);for(let l=0;l<v.length;l++){let[u,d,w,_]=v[l];if(ce(e)){const M="srgb",P="srgb-linear";u==="encoding"?(u="colorSpace",d=d===3001?M:P):u==="outputEncoding"&&(u="outputColorSpace",d=d===3001?M:P)}let c=e,p=c[u];if(_.length&&(p=_.reduce((h,M)=>h[M],e),!(p&&p.set))){const[h,...M]=_.reverse();c=M.reverse().reduce((P,E)=>P[E],e),u=h}if(d===Ye+"remove")if(c.constructor){let h=je.get(c.constructor);h||(h=new c.constructor,je.set(c.constructor,h)),d=h[u]}else d=0;if(w)d?f.handlers[u]=d:delete f.handlers[u],f.eventCount=Object.keys(f.handlers).length;else if(p&&p.set&&(p.copy||p instanceof se)){if(Array.isArray(d))p.fromArray?p.fromArray(d):p.set(...d);else if(p.copy&&d&&d.constructor&&p.constructor===d.constructor)p.copy(d);else if(d!==void 0){const h=p instanceof He;!h&&p.setScalar?p.setScalar(d):p instanceof se&&d instanceof se?p.mask=d.mask:p.set(d),!We()&&!m.linear&&h&&p.convertSRGBToLinear()}}else if(c[u]=d,c[u]instanceof at&&c[u].format===st&&c[u].type===lt){const h=c[u];ce(h)&&ce(m.gl)?h.colorSpace=m.gl.outputColorSpace:h.encoding=m.gl.outputEncoding}X(e)}if(f.parent&&m.internal&&e.raycast&&n!==f.eventCount){const l=m.internal.interaction.indexOf(e);l>-1&&m.internal.interaction.splice(l,1),f.eventCount&&m.internal.interaction.push(e)}return!(v.length===1&&v[0][0]==="onUpdate")&&v.length&&(s=e.__r3f)!=null&&s.parent&&be(e),e}function X(e){var t,o;const i=(t=e.__r3f)==null||(o=t.root)==null||o.getState==null?void 0:o.getState();i&&i.internal.frames===0&&i.invalidate()}function be(e){e.onUpdate==null||e.onUpdate(e)}function Qe(e,t){e.manual||(Ve(e)?(e.left=t.width/-2,e.right=t.width/2,e.top=t.height/2,e.bottom=t.height/-2):e.aspect=t.width/t.height,e.updateProjectionMatrix(),e.updateMatrixWorld())}function ie(e){return(e.eventObject||e.object).uuid+"/"+e.index+e.instanceId}function qt(){var e;const t=typeof self<"u"&&self||typeof window<"u"&&window;if(!t)return K.DefaultEventPriority;switch((e=t.event)==null?void 0:e.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return K.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return K.ContinuousEventPriority;default:return K.DefaultEventPriority}}function Ze(e,t,o,i){const s=o.get(t);s&&(o.delete(t),o.size===0&&(e.delete(i),s.target.releasePointerCapture(i)))}function Ut(e,t){const{internal:o}=e.getState();o.interaction=o.interaction.filter(i=>i!==t),o.initialHits=o.initialHits.filter(i=>i!==t),o.hovered.forEach((i,s)=>{(i.eventObject===t||i.object===t)&&o.hovered.delete(s)}),o.capturedMap.forEach((i,s)=>{Ze(o.capturedMap,t,i,s)})}function $t(e){function t(a){const{internal:v}=e.getState(),n=a.offsetX-v.initialClick[0],r=a.offsetY-v.initialClick[1];return Math.round(Math.sqrt(n*n+r*r))}function o(a){return a.filter(v=>["Move","Over","Enter","Out","Leave"].some(n=>{var r;return(r=v.__r3f)==null?void 0:r.handlers["onPointer"+n]}))}function i(a,v){const n=e.getState(),r=new Set,l=[],u=v?v(n.internal.interaction):n.internal.interaction;for(let c=0;c<u.length;c++){const p=Z(u[c]);p&&(p.raycaster.camera=void 0)}n.previousRoot||n.events.compute==null||n.events.compute(a,n);function d(c){const p=Z(c);if(!p||!p.events.enabled||p.raycaster.camera===null)return[];if(p.raycaster.camera===void 0){var h;p.events.compute==null||p.events.compute(a,p,(h=p.previousRoot)==null?void 0:h.getState()),p.raycaster.camera===void 0&&(p.raycaster.camera=null)}return p.raycaster.camera?p.raycaster.intersectObject(c,!0):[]}let w=u.flatMap(d).sort((c,p)=>{const h=Z(c.object),M=Z(p.object);return!h||!M?c.distance-p.distance:M.events.priority-h.events.priority||c.distance-p.distance}).filter(c=>{const p=ie(c);return r.has(p)?!1:(r.add(p),!0)});n.events.filter&&(w=n.events.filter(w,n));for(const c of w){let p=c.object;for(;p;){var _;(_=p.__r3f)!=null&&_.eventCount&&l.push({...c,eventObject:p}),p=p.parent}}if("pointerId"in a&&n.internal.capturedMap.has(a.pointerId))for(let c of n.internal.capturedMap.get(a.pointerId).values())r.has(ie(c.intersection))||l.push(c.intersection);return l}function s(a,v,n,r){const l=e.getState();if(a.length){const u={stopped:!1};for(const d of a){const w=Z(d.object)||l,{raycaster:_,pointer:c,camera:p,internal:h}=w,M=new Y(c.x,c.y,0).unproject(p),P=A=>{var C,j;return(C=(j=h.capturedMap.get(A))==null?void 0:j.has(d.eventObject))!=null?C:!1},E=A=>{const C={intersection:d,target:v.target};h.capturedMap.has(A)?h.capturedMap.get(A).set(d.eventObject,C):h.capturedMap.set(A,new Map([[d.eventObject,C]])),v.target.setPointerCapture(A)},x=A=>{const C=h.capturedMap.get(A);C&&Ze(h.capturedMap,d.eventObject,C,A)};let L={};for(let A in v){let C=v[A];typeof C!="function"&&(L[A]=C)}let T={...d,...L,pointer:c,intersections:a,stopped:u.stopped,delta:n,unprojectedPoint:M,ray:_.ray,camera:p,stopPropagation(){const A="pointerId"in v&&h.capturedMap.get(v.pointerId);if((!A||A.has(d.eventObject))&&(T.stopped=u.stopped=!0,h.hovered.size&&Array.from(h.hovered.values()).find(C=>C.eventObject===d.eventObject))){const C=a.slice(0,a.indexOf(d));f([...C,d])}},target:{hasPointerCapture:P,setPointerCapture:E,releasePointerCapture:x},currentTarget:{hasPointerCapture:P,setPointerCapture:E,releasePointerCapture:x},nativeEvent:v};if(r(T),u.stopped===!0)break}}return a}function f(a){const{internal:v}=e.getState();for(const n of v.hovered.values())if(!a.length||!a.find(r=>r.object===n.object&&r.index===n.index&&r.instanceId===n.instanceId)){const l=n.eventObject.__r3f,u=l==null?void 0:l.handlers;if(v.hovered.delete(ie(n)),l!=null&&l.eventCount){const d={...n,intersections:a};u.onPointerOut==null||u.onPointerOut(d),u.onPointerLeave==null||u.onPointerLeave(d)}}}function g(a,v){for(let n=0;n<v.length;n++){const r=v[n].__r3f;r==null||r.handlers.onPointerMissed==null||r.handlers.onPointerMissed(a)}}function m(a){switch(a){case"onPointerLeave":case"onPointerCancel":return()=>f([]);case"onLostPointerCapture":return v=>{const{internal:n}=e.getState();"pointerId"in v&&n.capturedMap.has(v.pointerId)&&requestAnimationFrame(()=>{n.capturedMap.has(v.pointerId)&&(n.capturedMap.delete(v.pointerId),f([]))})}}return function(n){const{onPointerMissed:r,internal:l}=e.getState();l.lastEvent.current=n;const u=a==="onPointerMove",d=a==="onClick"||a==="onContextMenu"||a==="onDoubleClick",_=i(n,u?o:void 0),c=d?t(n):0;a==="onPointerDown"&&(l.initialClick=[n.offsetX,n.offsetY],l.initialHits=_.map(h=>h.eventObject)),d&&!_.length&&c<=2&&(g(n,l.interaction),r&&r(n)),u&&f(_);function p(h){const M=h.eventObject,P=M.__r3f,E=P==null?void 0:P.handlers;if(P!=null&&P.eventCount)if(u){if(E.onPointerOver||E.onPointerEnter||E.onPointerOut||E.onPointerLeave){const x=ie(h),L=l.hovered.get(x);L?L.stopped&&h.stopPropagation():(l.hovered.set(x,h),E.onPointerOver==null||E.onPointerOver(h),E.onPointerEnter==null||E.onPointerEnter(h))}E.onPointerMove==null||E.onPointerMove(h)}else{const x=E[a];x?(!d||l.initialHits.includes(M))&&(g(n,l.interaction.filter(L=>!l.initialHits.includes(L))),x(h)):d&&l.initialHits.includes(M)&&g(n,l.interaction.filter(L=>!l.initialHits.includes(L)))}}s(_,n,c,p)}}return{handlePointer:m}}const et=e=>!!(e!=null&&e.render),Ce=y.createContext(null),Wt=(e,t)=>{const o=Ne((m,a)=>{const v=new Y,n=new Y,r=new Y;function l(c=a().camera,p=n,h=a().size){const{width:M,height:P,top:E,left:x}=h,L=M/P;p instanceof Y?r.copy(p):r.set(...p);const T=c.getWorldPosition(v).distanceTo(r);if(Ve(c))return{width:M/c.zoom,height:P/c.zoom,top:E,left:x,factor:1,distance:T,aspect:L};{const A=c.fov*Math.PI/180,C=2*Math.tan(A/2)*T,j=C*(M/P);return{width:j,height:C,top:E,left:x,factor:M/j,distance:T,aspect:L}}}let u;const d=c=>m(p=>({performance:{...p.performance,current:c}})),w=new Be;return{set:m,get:a,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(c=1)=>e(a(),c),advance:(c,p)=>t(c,p,a()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new bt,pointer:w,mouse:w,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const c=a();u&&clearTimeout(u),c.performance.current!==c.performance.min&&d(c.performance.min),u=setTimeout(()=>d(a().performance.max),c.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:l},setEvents:c=>m(p=>({...p,events:{...p.events,...c}})),setSize:(c,p,h,M,P)=>{const E=a().camera,x={width:c,height:p,top:M||0,left:P||0,updateStyle:h};m(L=>({size:x,viewport:{...L.viewport,...l(E,n,x)}}))},setDpr:c=>m(p=>{const h=Ke(c);return{viewport:{...p.viewport,dpr:h,initialDpr:p.viewport.initialDpr||h}}}),setFrameloop:(c="always")=>{const p=a().clock;p.stop(),p.elapsedTime=0,c!=="never"&&(p.start(),p.elapsedTime=0),m(()=>({frameloop:c}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:y.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(c,p,h)=>{const M=a().internal;return M.priority=M.priority+(p>0?1:0),M.subscribers.push({ref:c,priority:p,store:h}),M.subscribers=M.subscribers.sort((P,E)=>P.priority-E.priority),()=>{const P=a().internal;P!=null&&P.subscribers&&(P.priority=P.priority-(p>0?1:0),P.subscribers=P.subscribers.filter(E=>E.ref!==c))}}}}}),i=o.getState();let s=i.size,f=i.viewport.dpr,g=i.camera;return o.subscribe(()=>{const{camera:m,size:a,viewport:v,gl:n,set:r}=o.getState();if(a!==s||v.dpr!==f){var l;s=a,f=v.dpr,Qe(m,a),n.setPixelRatio(v.dpr);const u=(l=a.updateStyle)!=null?l:typeof HTMLCanvasElement<"u"&&n.domElement instanceof HTMLCanvasElement;n.setSize(a.width,a.height,u)}m!==g&&(g=m,r(u=>({viewport:{...u.viewport,...u.viewport.getCurrentViewport(m)}})))}),o.subscribe(m=>e(m)),o};let ae,Vt=new Set,Xt=new Set,Yt=new Set;function de(e,t){if(e.size)for(const{callback:o}of e.values())o(t)}function ee(e,t){switch(e){case"before":return de(Vt,t);case"after":return de(Xt,t);case"tail":return de(Yt,t)}}let pe,ve;function me(e,t,o){let i=t.clock.getDelta();for(t.frameloop==="never"&&typeof e=="number"&&(i=e-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=e),pe=t.internal.subscribers,ae=0;ae<pe.length;ae++)ve=pe[ae],ve.ref.current(ve.store.getState(),i,o);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),t.frameloop==="always"?1:t.internal.frames}function Kt(e){let t=!1,o,i,s;function f(a){i=requestAnimationFrame(f),t=!0,o=0,ee("before",a);for(const n of e.values()){var v;s=n.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((v=s.gl.xr)!=null&&v.isPresenting)&&(o+=me(a,s))}if(ee("after",a),o===0)return ee("tail",a),t=!1,cancelAnimationFrame(i)}function g(a,v=1){var n;if(!a)return e.forEach(r=>g(r.store.getState()),v);(n=a.gl.xr)!=null&&n.isPresenting||!a.internal.active||a.frameloop==="never"||(a.internal.frames=Math.min(60,a.internal.frames+v),t||(t=!0,requestAnimationFrame(f)))}function m(a,v=!0,n,r){if(v&&ee("before",a),n)me(a,n,r);else for(const l of e.values())me(a,l.store.getState());v&&ee("after",a)}return{loop:f,invalidate:g,advance:m}}function Pe(){const e=y.useContext(Ce);if(!e)throw new Error("R3F: Hooks can only be used within the Canvas component!");return e}function B(e=o=>o,t){return Pe()(e,t)}function tt(e,t=0){const o=Pe(),i=o.getState().internal.subscribe,s=Ee(e);return re(()=>i(s,t,o),[t,i,o]),null}function nt(e,t){return function(o,...i){const s=new o;return e&&e(s),Promise.all(i.map(f=>new Promise((g,m)=>s.load(f,a=>{a.scene&&Object.assign(a,Gt(a.scene)),g(a)},t,a=>m(new Error(`Could not load ${f}: ${a.message})`))))))}}function Se(e,t,o,i){const s=Array.isArray(t)?t:[t],f=Ge(nt(o,i),[e,...s],{equal:D.equ});return Array.isArray(t)?f:f[0]}Se.preload=function(e,t,o){const i=Array.isArray(t)?t:[t];return Dt(nt(o),[e,...i])};Se.clear=function(e,t){const o=Array.isArray(t)?t:[t];return It([e,...o])};const J=new Map,{invalidate:De,advance:Ie}=Kt(J),{reconciler:te,applyProps:$}=zt(J,qt),W={objects:"shallow",strict:!1},Jt=(e,t)=>{const o=typeof e=="function"?e(t):e;return et(o)?o:new mt({powerPreference:"high-performance",canvas:t,antialias:!0,alpha:!0,...e})};function Qt(e,t){if(t)return t;if(typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&e.parentElement){const{width:o,height:i,top:s,left:f}=e.parentElement.getBoundingClientRect();return{width:o,height:i,top:s,left:f}}else if(typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas)return{width:e.width,height:e.height,top:0,left:0};return{width:0,height:0,top:0,left:0}}function Zt(e){const t=J.get(e),o=t==null?void 0:t.fiber,i=t==null?void 0:t.store;t&&console.warn("R3F.createRoot should only be called once!");const s=typeof reportError=="function"?reportError:console.error,f=i||Wt(De,Ie),g=o||te.createContainer(f,K.ConcurrentRoot,null,!1,null,"",s,null);t||J.set(e,{fiber:g,store:f});let m,a=!1,v;return{configure(n={}){let{gl:r,size:l,scene:u,events:d,onCreated:w,shadows:_=!1,linear:c=!1,flat:p=!1,legacy:h=!1,orthographic:M=!1,frameloop:P="always",dpr:E=[1,2],performance:x,raycaster:L,camera:T,onPointerMissed:A}=n,C=f.getState(),j=C.gl;C.gl||C.set({gl:j=Jt(r,e)});let z=C.raycaster;z||C.set({raycaster:z=new Fe});const{params:q,...U}=L||{};if(D.equ(U,z,W)||$(z,{...U}),D.equ(q,z.params,W)||$(z,{params:{...z.params,...q}}),!C.camera||C.camera===v&&!D.equ(v,T,W)){v=T;const R=T instanceof ht,O=R?T:M?new ct(0,0,0,0,.1,1e3):new ut(75,0,.1,1e3);R||(O.position.z=5,T&&$(O,T),!C.camera&&!(T!=null&&T.rotation)&&O.lookAt(0,0,0)),C.set({camera:O})}if(!C.scene){let R;u instanceof _e?R=u:(R=new _e,u&&$(R,u)),C.set({scene:V(R)})}if(!C.xr){const R=(I,Q)=>{const G=f.getState();G.frameloop!=="never"&&Ie(I,!0,G,Q)},O=()=>{const I=f.getState();I.gl.xr.enabled=I.gl.xr.isPresenting,I.gl.xr.setAnimationLoop(I.gl.xr.isPresenting?R:null),I.gl.xr.isPresenting||De(I)},H={connect(){const I=f.getState().gl;I.xr.addEventListener("sessionstart",O),I.xr.addEventListener("sessionend",O)},disconnect(){const I=f.getState().gl;I.xr.removeEventListener("sessionstart",O),I.xr.removeEventListener("sessionend",O)}};j.xr&&H.connect(),C.set({xr:H})}if(j.shadowMap){const R=j.shadowMap.enabled,O=j.shadowMap.type;if(j.shadowMap.enabled=!!_,D.boo(_))j.shadowMap.type=le;else if(D.str(_)){var N;const H={basic:gt,percentage:_t,soft:le,variance:yt};j.shadowMap.type=(N=H[_])!=null?N:le}else D.obj(_)&&Object.assign(j.shadowMap,_);(R!==j.shadowMap.enabled||O!==j.shadowMap.type)&&(j.shadowMap.needsUpdate=!0)}const F=We();F&&("enabled"in F?F.enabled=!h:"legacyMode"in F&&(F.legacyMode=h)),$(j,{outputEncoding:c?3e3:3001,toneMapping:p?ft:dt}),C.legacy!==h&&C.set(()=>({legacy:h})),C.linear!==c&&C.set(()=>({linear:c})),C.flat!==p&&C.set(()=>({flat:p})),r&&!D.fun(r)&&!et(r)&&!D.equ(r,j,W)&&$(j,r),d&&!C.events.handlers&&C.set({events:d(f)});const S=Qt(e,l);return D.equ(S,C.size,W)||C.setSize(S.width,S.height,S.updateStyle,S.top,S.left),E&&C.viewport.dpr!==Ke(E)&&C.setDpr(E),C.frameloop!==P&&C.setFrameloop(P),C.onPointerMissed||C.set({onPointerMissed:A}),x&&!D.equ(x,C.performance,W)&&C.set(R=>({performance:{...R.performance,...x}})),m=w,a=!0,this},render(n){return a||this.configure(),te.updateContainer(y.createElement(en,{store:f,children:n,onCreated:m,rootElement:e}),g,null,()=>{}),f},unmount(){rt(e)}}}function en({store:e,children:t,onCreated:o,rootElement:i}){return re(()=>{const s=e.getState();s.set(f=>({internal:{...f.internal,active:!0}})),o&&o(s),e.getState().events.connected||s.events.connect==null||s.events.connect(i)},[]),y.createElement(Ce.Provider,{value:e},t)}function rt(e,t){const o=J.get(e),i=o==null?void 0:o.fiber;if(i){const s=o==null?void 0:o.store.getState();s&&(s.internal.active=!1),te.updateContainer(null,i,null,()=>{s&&setTimeout(()=>{try{var f,g,m,a;s.events.disconnect==null||s.events.disconnect(),(f=s.gl)==null||(g=f.renderLists)==null||g.dispose==null||g.dispose(),(m=s.gl)==null||m.forceContextLoss==null||m.forceContextLoss(),(a=s.gl)!=null&&a.xr&&s.xr.disconnect(),Nt(s),J.delete(e),t&&t(e)}catch{}},500)})}}function tn(e,t,o){return y.createElement(nn,{children:e,container:t,state:o})}function nn({state:e={},children:t,container:o}){const{events:i,size:s,...f}=e,g=Pe(),[m]=y.useState(()=>new Fe),[a]=y.useState(()=>new Be),v=Ee((r,l)=>{let u;if(l.camera&&s){const d=l.camera;u=r.viewport.getCurrentViewport(d,new Y,s),d!==r.camera&&Qe(d,s)}return{...r,get:l.get,set:l.set,scene:o,raycaster:m,pointer:a,mouse:a,previousRoot:g,events:{...r.events,...l.events,...i},size:{...r.size,...s},viewport:{...r.viewport,...u},setEvents:d=>l.set(w=>({...w,events:{...w.events,...d}}))}}),n=y.useMemo(()=>{const r=Ne((u,d)=>({...f,set:u,get:d})),l=u=>r.setState(d=>v.current(u,d));return l(g.getState()),g.subscribe(l),r},[g,o]);return y.useEffect(()=>()=>n.destroy(),[n]),y.createElement(y.Fragment,null,te.createPortal(y.createElement(Ce.Provider,{value:n},t),n,null))}te.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:y.version});const he={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function rn(e){const{handlePointer:t}=$t(e);return{priority:1,enabled:!0,compute(o,i,s){i.pointer.set(o.offsetX/i.size.width*2-1,-(o.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(he).reduce((o,i)=>({...o,[i]:t(i)}),{}),update:()=>{var o;const{events:i,internal:s}=e.getState();(o=s.lastEvent)!=null&&o.current&&i.handlers&&i.handlers.onPointerMove(s.lastEvent.current)},connect:o=>{var i;const{set:s,events:f}=e.getState();f.disconnect==null||f.disconnect(),s(g=>({events:{...g.events,connected:o}})),Object.entries((i=f.handlers)!=null?i:[]).forEach(([g,m])=>{const[a,v]=he[g];o.addEventListener(a,m,{passive:v})})},disconnect:()=>{const{set:o,events:i}=e.getState();if(i.connected){var s;Object.entries((s=i.handlers)!=null?s:[]).forEach(([f,g])=>{if(i&&i.connected instanceof HTMLElement){const[m]=he[f];i.connected.removeEventListener(m,g)}}),o(f=>({events:{...f.events,connected:void 0}}))}}}}const on=y.forwardRef(function({children:t,fallback:o,resize:i,style:s,gl:f,events:g=rn,eventSource:m,eventPrefix:a,shadows:v,linear:n,flat:r,legacy:l,orthographic:u,frameloop:d,dpr:w,performance:_,raycaster:c,camera:p,onPointerMissed:h,onCreated:M,...P},E){y.useMemo(()=>$e(wt),[]);const x=xt(),[L,T]=Rt({scroll:!0,debounce:{scroll:50,resize:0},...i}),A=y.useRef(null),C=y.useRef(null);y.useImperativeHandle(E,()=>A.current);const j=Ee(h),[z,q]=y.useState(!1),[U,N]=y.useState(!1);if(z)throw z;if(U)throw U;const F=y.useRef(null);re(()=>{const k=A.current;T.width>0&&T.height>0&&k&&(F.current||(F.current=Zt(k)),F.current.configure({gl:f,events:g,shadows:v,linear:n,flat:r,legacy:l,orthographic:u,frameloop:d,dpr:w,performance:_,raycaster:c,camera:p,size:T,onPointerMissed:(...S)=>j.current==null?void 0:j.current(...S),onCreated:S=>{S.events.connect==null||S.events.connect(m?Ft(m)?m.current:m:C.current),a&&S.setEvents({compute:(R,O)=>{const H=R[a+"X"],I=R[a+"Y"];O.pointer.set(H/O.size.width*2-1,-(I/O.size.height)*2+1),O.raycaster.setFromCamera(O.pointer,O.camera)}}),M==null||M(S)}}),F.current.render(y.createElement(x,null,y.createElement(Xe,{set:N},y.createElement(y.Suspense,{fallback:y.createElement(Bt,{set:q})},t)))))}),y.useEffect(()=>{const k=A.current;if(k)return()=>rt(k)},[]);const b=m?"none":"auto";return y.createElement("div",ne({ref:C,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:b,...s}},P),y.createElement("div",{ref:L,style:{width:"100%",height:"100%"}},y.createElement("canvas",{ref:A,style:{display:"block"}},o)))}),En=y.forwardRef(function(t,o){return y.createElement(Ot,null,y.createElement(on,ne({},t,{ref:o})))}),Cn=y.forwardRef(({makeDefault:e,camera:t,regress:o,domElement:i,enableDamping:s=!0,keyEvents:f=!1,onChange:g,onStart:m,onEnd:a,...v},n)=>{const r=B(E=>E.invalidate),l=B(E=>E.camera),u=B(E=>E.gl),d=B(E=>E.events),w=B(E=>E.setEvents),_=B(E=>E.set),c=B(E=>E.get),p=B(E=>E.performance),h=t||l,M=i||d.connected||u.domElement,P=y.useMemo(()=>new jt(h),[h]);return tt(()=>{P.enabled&&P.update()},-1),y.useEffect(()=>(f&&P.connect(f===!0?M:f),P.connect(M),()=>void P.dispose()),[f,M,o,P,r]),y.useEffect(()=>{const E=T=>{r(),o&&p.regress(),g&&g(T)},x=T=>{m&&m(T)},L=T=>{a&&a(T)};return P.addEventListener("change",E),P.addEventListener("start",x),P.addEventListener("end",L),()=>{P.removeEventListener("start",x),P.removeEventListener("end",L),P.removeEventListener("change",E)}},[g,m,a,P,r,w]),y.useEffect(()=>{if(e){const E=c().controls;return _({controls:P}),()=>_({controls:E})}},[e,P]),y.createElement("primitive",ne({ref:n,object:P,enableDamping:s},v))}),ge={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},an="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",sn=e=>typeof e=="object"&&typeof e.then=="function",ze=e=>Array.isArray(e);function ot({files:e=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"],path:t="",preset:o=void 0,encoding:i=void 0,extensions:s}={}){let f=null,g=!1,m;if(o){if(!(o in ge))throw new Error("Preset must be one of: "+Object.keys(ge).join(", "));e=ge[o],t=an}if(sn(e))e=Ge(async u=>(await u).default,[e]),f=Re;else{var a;g=ze(e),m=!ze(e)&&((a=e.split(".").pop())==null?void 0:a.toLowerCase()),f=g?Pt:m==="hdr"?Lt:m==="exr"?Re:null}if(!f)throw new Error("useEnvironment: Unrecognized file extension: "+e);const v=Se(f,g?[e]:e,u=>{u.setPath==null||u.setPath(t),s&&s(u)}),n=g?v[0]:v;n.mapping=g?Et:Ct;const r=3001,l=3e3;return"colorSpace"in n?n.colorSpace=i??g?"srgb":"srgb-linear":n.encoding=i??g?r:l,n}const ln=e=>e.current&&e.current.isScene,cn=e=>ln(e)?e.current:e;function Me(e,t,o,i,s=0){const f=cn(t||o),g=f.background,m=f.environment,a=f.backgroundBlurriness||0;return e!=="only"&&(f.environment=i),e&&(f.background=i),e&&f.backgroundBlurriness!==void 0&&(f.backgroundBlurriness=s),()=>{e!=="only"&&(f.environment=m),e&&(f.background=g),e&&f.backgroundBlurriness!==void 0&&(f.backgroundBlurriness=a)}}function ke({scene:e,background:t=!1,blur:o,map:i}){const s=B(f=>f.scene);return y.useLayoutEffect(()=>{if(i)return Me(t,e,s,i,o)},[s,e,i,t,o]),null}function it({background:e=!1,scene:t,blur:o,...i}){const s=ot(i),f=B(g=>g.scene);return y.useLayoutEffect(()=>Me(e,t,f,s,o),[s,e,t,f,o]),null}function un({children:e,near:t=1,far:o=1e3,resolution:i=256,frames:s=1,map:f,background:g=!1,blur:m,scene:a,files:v,path:n,preset:r=void 0,extensions:l}){const u=B(h=>h.gl),d=B(h=>h.scene),w=y.useRef(null),[_]=y.useState(()=>new _e),c=y.useMemo(()=>{const h=new St(i);return h.texture.type=Mt,h},[i]);y.useLayoutEffect(()=>(s===1&&w.current.update(u,_),Me(g,a,d,c.texture,m)),[e,_,c.texture,a,d,g,s,u]);let p=1;return tt(()=>{(s===1/0||p<s)&&(w.current.update(u,_),p++)}),y.createElement(y.Fragment,null,tn(y.createElement(y.Fragment,null,e,y.createElement("cubeCamera",{ref:w,args:[t,o,c]}),v||r?y.createElement(it,{background:!0,files:v,preset:r,path:n,extensions:l}):f?y.createElement(ke,{background:!0,map:f,extensions:l}):null),_))}function fn(e){var t,o,i,s;const f=ot(e),g=e.map||f;y.useMemo(()=>$e({GroundProjectedEnvImpl:At}),[]);const m=y.useMemo(()=>[g],[g]),a=(t=e.ground)==null?void 0:t.height,v=(o=e.ground)==null?void 0:o.radius,n=(i=(s=e.ground)==null?void 0:s.scale)!==null&&i!==void 0?i:1e3;return y.createElement(y.Fragment,null,y.createElement(ke,ne({},e,{map:g})),y.createElement("groundProjectedEnvImpl",{args:m,scale:n,height:a,radius:v}))}function Pn(e){return e.ground?y.createElement(fn,e):e.map?y.createElement(ke,e):e.children?y.createElement(un,e):y.createElement(it,e)}const Sn=y.forwardRef(({fog:e=!1,renderOrder:t,depthWrite:o=!1,colorStop:i=0,color:s="black",opacity:f=.5,...g},m)=>{const a=y.useMemo(()=>{const v=document.createElement("canvas");v.width=128,v.height=128;const n=v.getContext("2d"),r=n.createRadialGradient(v.width/2,v.height/2,0,v.width/2,v.height/2,v.width/2);return r.addColorStop(i,new He(s).getStyle()),r.addColorStop(1,"rgba(0,0,0,0)"),n.fillStyle=r,n.fillRect(0,0,v.width,v.height),v},[s,i]);return y.createElement("mesh",ne({renderOrder:t,ref:m,"rotation-x":-Math.PI/2},g),y.createElement("planeGeometry",null),y.createElement("meshBasicMaterial",{transparent:!0,opacity:f,fog:e,depthWrite:o,side:kt},y.createElement("canvasTexture",{attach:"map",args:[a]})))});export{En as C,Pn as E,Cn as O,Sn as S,tt as u};
