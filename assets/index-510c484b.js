import{r as i,j as s,R as d}from"./react-76f7fb99.js";import{c as u}from"./react-dom-e44ba450.js";import"./@tensorflow-4a9c595e.js";import{d as m,T as p,l as f}from"./face-api.js-a34ad70b.js";import{G as g}from"./react-github-btn-5c4c3b9f.js";import"./scheduler-765c72db.js";import"./tslib-890ecb0d.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function t(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(e){if(e.ep)return;e.ep=!0;const o=t(e);fetch(e.href,o)}})();const l=i.createContext(void 0),h=({children:a})=>{const[r,t]=i.useState();return i.useEffect(()=>{r!=null&&r.active||navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:""}}).then(t).catch(()=>{alert("This app will not works without camera permission. Please give this permission via browser.")})},[r,t]),s.jsx(l.Provider,{value:r,children:a})},b=()=>i.useContext(l),x=({onStream:a})=>{const r=i.useRef(null),t=b(),n=i.useCallback(async e=>{if(!a)return;await a(e)===!0&&n(e)},[a]);return i.useEffect(()=>{!(t!=null&&t.active)||!r.current||(r.current.srcObject=t)},[t,r]),(t==null?void 0:t.active)&&s.jsx("video",{ref:r,autoPlay:!0,playsInline:!0,onPlay:e=>n(e.target),style:{position:"fixed",opacity:0,top:0,left:0}})},y="/3d-object/assets/astronaut-be2fa186.png",v=({angle:a})=>{const t=(a.x-50)/100*20,n=(a.x-50)/100*70,e=0,o=0,c=(a.x-50)/100*5;return s.jsx("div",{className:"card-container",style:{display:"grid",placeItems:"center",perspective:600,pointerEvents:"none"},children:s.jsx("div",{className:"card",style:{position:"relative",width:300,maxWidth:300,height:300,borderRadius:150,background:`linear-gradient(
            rgba(250, 250, 250, 0.2),
            rgba(0, 0, 0, 0.3)
          `,boxShadow:"0 0 100px #000",backdropFilter:"blur(4px)",transform:`
            rotateY(${n}deg)
            rotateX(${e}deg)
            translateX(${t}%)
            translateY(0%)
          `,transition:"transform 0.1s ease-in-out"},children:s.jsx("img",{className:"astronaut",style:{position:"absolute",width:"100%",height:"100%",objectFit:"contain",transform:`
              translateX(${c}%)
              translateY(${o}%)
            `,transition:"transform 0.2s ease-in-out"},src:y})})})},j="/3d-object/assets/background-a4ea1b11.jpg",w=({angle:a})=>{const t=(a.x-50)/100*10,n=(a.x-50)/100*30,e=0;return s.jsx("img",{className:"background",style:{position:"absolute",top:"-10%",left:"-10%",width:"120%",height:"120%",objectFit:"cover",perspective:600,transform:`
          translateX(${t}%)
          translateY(0%)
          rotateX(${e}deg)
          rotateY(${n}deg)
        `,pointerEvents:"none",filter:"blur(1px)",transition:"transform 0.1s ease-in-out"},src:j})};function P(){const[a,r]=i.useState({x:50,y:20}),t=i.useCallback(async n=>{const e=await m(n,new p({scoreThreshold:.5,inputSize:128}));return e!=null&&e.box&&(r({x:(e.box.x+e.box.width/2)/e.imageWidth*100,y:(e.box.y+e.box.height/2)/e.imageHeight*100}),await new Promise(o=>requestAnimationFrame(o))),!0},[]);return s.jsxs("div",{style:{display:"grid",placeItems:"center",position:"relative",height:"100%",width:"100%",background:"cyan"},children:[s.jsx(w,{angle:a}),s.jsx(v,{angle:a}),s.jsx(h,{children:s.jsx(x,{onStream:t})}),s.jsx("div",{style:{position:"fixed",bottom:15,right:15},children:s.jsx(g,{href:"https://github.com/nainemom/3d-object","data-size":"large","data-show-count":"true","aria-label":"Star nainemom/3d-object on GitHub",children:"Star"})})]})}const S=async()=>{await f("./models"),u(document.getElementById("root")).render(s.jsx(d.StrictMode,{children:s.jsx(P,{})}))};S();
